---
import Button from './Button.astro';
const currentPath = Astro.url.pathname;

// Helper function to check if a path is active
const isActive = (path: string) => {
  if (path === '/') {
    return currentPath === '/' || currentPath === '';
  }
  return currentPath.startsWith(path);
};
---

<header class="fixed top-0 left-0 right-0 z-100 flex items-center justify-between bg-white rounded-lg px-6 py-3 mx-2 md:mx-8 mt-2 md:mt-4 shadow-lg">
  <div class="flex items-center gap-2">
    <a href="/">
      <img src="/logo-ColombiAndo.png" alt="ColombiAndo logo" class="h-10 w-auto md:h-14" />
    </a>
  </div>
  
  <!-- Mobile menu button -->
  <button id="mobile-menu-toggle" class="md:hidden focus:outline-none" aria-label="Toggle menu">
    <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
    </svg>
  </button>
  
  <!-- Desktop Navigation -->
  <nav class="hidden md:flex flex-grow gap-4 border-b-4 border-black justify-end ml-6 pb-4">
    <a href="/">
      <Button variant="yellow" active={isActive('/')}>Inicio</Button>
    </a>
    <a href="/proyectos">
      <Button variant="blue" active={isActive('/proyectos')}>Proyectos</Button>
    </a>
    <a href="/nosotras">
      <Button variant="red" active={isActive('/nosotras')}>Nosotras</Button>
    </a>
    <a href="/donaciones">
      <Button variant="white" active={isActive('/donaciones')}>Donaciones</Button>
    </a>
  </nav>
  
  <!-- Mobile Navigation -->
  <div id="mobile-menu" class="fixed inset-0 z-20 bg-white transform translate-x-full transition-transform duration-300 ease-in-out md:hidden">
    <div class="flex justify-between items-center p-6 border-b">
      <img src="/logo-ColombiAndo.png" alt="ColombiAndo logo" class="h-10 w-auto" />
      <button id="mobile-menu-close" class="focus:outline-none" aria-label="Close menu">
        <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
        </svg>
      </button>
    </div>
    <nav class="flex flex-col items-center gap-6 p-8">
      <a href="/" class="w-full max-w-xs text-center">
        <Button variant="yellow" active={isActive('/')} class="w-full">Inicio</Button>
      </a>
      <a href="/proyectos" class="w-full max-w-xs text-center">
        <Button variant="blue" active={isActive('/proyectos')} class="w-full">Proyectos</Button>
      </a>
      <a href="/nosotras" class="w-full max-w-xs text-center">
        <Button variant="red" active={isActive('/nosotras')} class="w-full">Nosotras</Button>
      </a>
      <a href="/donaciones" class="w-full max-w-xs text-center">
        <Button variant="white" active={isActive('/donaciones')} class="w-full">Donaciones</Button>
      </a>
    </nav>
  </div>
</header>

<script>
  // Mobile menu toggle functionality
  document.addEventListener('DOMContentLoaded', () => {
    const mobileMenuToggle = document.getElementById('mobile-menu-toggle');
    const mobileMenuClose = document.getElementById('mobile-menu-close');
    const mobileMenu = document.getElementById('mobile-menu');
    
    mobileMenuToggle?.addEventListener('click', () => {
      mobileMenu?.classList.remove('translate-x-full');
    });
    
    mobileMenuClose?.addEventListener('click', () => {
      mobileMenu?.classList.add('translate-x-full');
    });
  });
</script>